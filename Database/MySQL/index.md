# Index

## 8.2 인덱스란?

- 장점
  - 데이터 탐색이 빨라짐
- 단점
  - INSERT, UPDATE, DELETE가 느려짐
  - 인덱스도 결국 데이터임
- 구분
  - 알고리즘
    - B-Tree
      - 일반적으로 사용되는 알고리즘
      - 칼럼의 값을 변형하지 않고, 원래의 값을 이용해 인덱싱
    - Hash
      - 칼럼의 값으로 해시값을 계산해서 인덱싱
      - 검색이 매우 빠름
      - prefix, range 서칭불가
      - 메모리 기반 데이터베이스에서 많이 사용

## 8.3 B-Tree 인덱스

B-Tree 인덱스 구조

![](./images/ch8/b-tree_index_structure1.jpg)

MyISAM과 InnoDB 인덱스 구조

![](./images/ch8/myisam_innodb_structure1.jpg)

*애초에 데이터파일은 어떤식으로 serialize되는걸까? 칼럼이 추가되거나 제거되면?*

- 개요
  - Balanced-Tree
- 특징
  - 인덱스의 키 값은 모두 정렬, 데이터 파일의 레코드는 정렬돼 있지 않고 임의의 순서대로 저장되어 있음
  - 대부분의 인덱스에 사용(일반적)
  - 노드 하나에 페이지 하나 할당
  - 데이터 파일에서는 일반적으로는 데이터가 정렬되어 있지는 않음
    - InnoDB에서는 클러스터 인덱스인 프라이머리 키 순서로 정렬되어 저장됨
- 구조
  - 트리 구조
    - 루트 노드
    - 브랜치 노드
    - 리프 노드
      - 프라이머리 인덱스
        - 데이터 파일에서 해당 데이터가 존재하는 위치
      - 세컨데리 인덱스
        - 프라이머리 키 값
- 스토리지 엔진 별 인덱스 특징
  - InnoDB
    - (세컨데리 인덱스의 경우) 인덱스의 리프 페이지에 저장되어 있는, 프라이머리 키 값을 이용해 프라이머리 키 인덱스를 한 번 더 검색
    - 프라이머리 키 인덱스의 리프 페이지에 저장 돼 있는 레코드 읽기
      - *클러스터링 인덱스의 장점?*
  - MyISAM
    - 리프 페이지에 실제 데이터가 저장 되어 있는 INSERT순번이나, 데이터 파일 내의 위치(Offset)을 저장
