# 2. 암호학 개요

- 의문
- 2.1 암호학의 기본 개념
- 2.2 암호기법의 분류
- 2.3 주요 암호기술에 대한 개괄
- 2.4 암호 분석(암호 해독)
- 2.5 암호 알고리즘의 안전성 평가
- 2.6 지적 재산권 보호

## 의문

## 2.1 암호학의 기본 개념

### 암호학(cryptology)의 정의

- 암호기술과 암호해독에 관하여 연구하는 학문
  - 암호기술(cryptography)
    - 평문을 다른 사람이 알아볼 수 없는 형태의 암호문으로 만들고 특정한 비밀키를 알고 있는 사람만이 다시 평문으로 복원시킬 수 있도록 하는 기술
  - 암호해독(cryptanalysis)
    - 제3자(도청자)가 해독하는 방법을 분석

### 암호에서 사용하는 이름

- Alice and Bob
  - 앨리스가 메시지를 전송하고 밥이 수신하는 모델에 사용
- Eve
  - eavesdropper(소극적인 공격자, 도청자)
  - 도청만 가능
- Mallory
  - malicious 공격자
  - 메시지를 수정하고, 자신의 메시지로 대체한 이전의 메시지를 재전송할 수 있는 능력가짐
- Trent
  - trusted arbitrator
  - 신뢰할 수 있는 중재자
- Victor
  - verifier
  - 의도된 거래나 통신이 실제로 발생했음을 검증할 때 사용됨

### 송신자 수신자 도청자

- 송신자
  - 정보를 보내는 사람
- 수신자
  - 받는 사람
- 메시지
  - 송신된 정보를 총칭
- 도청자
  - 사람 뿐 아니라, 도청용 기계일 수도 있음

### 암호화와 복호화

- plain text(평문)
  - 암호화 하기 전의 메시지
- ciphertext(암호문)
  - 암호화 한 후의 메시지

### 암호화와 복호화의 기호적 표현

- `C = E_k(P)`
  - 평문 P를 키 K로 암호화하여(E) 암호문 C를 얻음
- `P = D_k(C)`
  - 암호문 C를 키 K로 복호화하여(D) 평문 P를 얻음

### 암호 알고리즘과 키의 분리

- 알고리즘을 재사용하기 위해서, 알고리즘과 키를 분리하여, 암호문이 반복되지 않도록 함

### 암호와 보안 상식

- 비밀 암호 알고리즘을 사용하지 말 것
  - 독자적인 암호는 매커니즘이 공개되면 끝
- 약한 암호는 암화화 하지 않는 것 보다 위험하다
  - 잘못된 안심
- 어떤 암호라도 언젠가는 해독된다
  - 해독되기까지 들어가는 시간 vs 지키고 싶은 평문의 가치
- 암호는 보안의 아주 작은 부분이다
  - 사회공학 공격을 막을 수 없음
    - 피싱, 트로이목마, 키로거
  - 한 시스템의 강도는 가장 약한 링크의 강도와 같기 때문에, 모든 링크 부위가 골고루 강해야 해당 시스템의 보안성이 강해짐
    - 가장 약한 링크는 암호가 아니라 사람

## 2.2 암호기법의 분류

### 치환 암호와 전치 암호

- 치환 암호(Substitution Cipher)
  - 정의
    - 비트, 문자 또는 문자의 블록을 다른 비트, 문자 또는 블록을 대체
  - 특징
    - 평문에서 사용하는 문자의 집합 != 암호문에서 사용하는 문자의 집합
      - 평문의 문자를 다른 문자로 교환하는 규칙이 일대일 대응이 아니어도 됨
- 전치 암호(Transposition Cipher)
  - 정의
    - 원문을 다른 문서로 대체하지 않지만 여기저기 움직이게 함
  - 특징
    - 평문에서 사용하는 문자의 집합 == 암호문에서 사용하는 문자의 집합
      - 일대일 대응
- 참고
  - 키 공간(Key space)의 크기는 키의 비트수에 비례

### 블록 암호와 스트림 암호

- 블록 암호(Block Cipher)
  - 정의
    - 어느 특정 비트 수의 집합을 한 번에 처리하는 암호 알고리즘의 총칭
      - 비트 수의 집합 -> 블록
      - 블록의 비트 수 -> 블록 길이
  - 특징
      - 일반적으로 블록의 크기는 ASCII 8비트, Unicode 16비트에 비례
      - 스트림 암호와는 다르게 Round를 사용하고, 반복적으로 암호화 과정을 수행해 암호화 강도 높임
- 스트림 암호(Stream Cipher)
  - 정의
    - 한번에 1비트 혹은 1바이트의 데이터 흐름(스트림)을 순차적으로 처리해가는 암호 알고리즘의 총칭
    - 일반적으로, 평문과 키 스트림을 XOR하여 생성
  - 특징
    - 블록 암호는 블록 단위로 처리가 완료되므로, 어디까지 암호화가 진행되었는가 하는 내부 상태를 가질 필요가 없음
    - 스트림 암호는 데이터 흐름을 순차적으로 처리해가기 때문에 내부 상태 가지고 있음
    - 군사 / 외교용으로 사용

|구분|스트림 암호|블록 암호|
|---|--------|-------|
|장점|암호화 속도가 빠름. 에러 전파 현상 없음|높은 확산, 기밀성, 해시함수 등 다양|
|단점|*낮은 확산(이게 뭐야?)*|느린 암호화, 에러 전달|
|사례|LSSR, MUX generator|DES, IDEA, SEED, RC5, AES|
|암호화 단위|비트|블록|
|주요 대상|음성, 오디오/비디오 스트리밍|일반 데이터 전송, 스토리지 저장|

### 위치에 따른 암호화의 구분

- 링크 암호화(Link Encrpytion)
  - 개요
    - 모든 정보는 암호화되고, 패킷은 라우터나 다른 중간에 있는 장비가 이 패킷을 다음에 어디로 보내야 하는지 알아야 하기 때문에 각 hop에서 해독되어야 함
    - 라우터는 패킷의 헤더 부분을 해독하고, 헤더 내의 라우팅과 주소 정보를 읽고, 그것을 다시 암호화하고 진행 방향으로 보내야 함
    - 링크 암호화는 Data link or physical layer에서 일어남
      - 하드웨어 암호화 장치들은 물리적 계층과의 인터페이스를 가지고 그것을 통과하는 모든 데이터 암호화
        - *그렇다는 이야기는 암호화 키를 모든 홉이 다 알고있다는 이야기인데 이것은 어떻게 가능한 것인지*
  - c.f) 홉
    - 패킷이 목적지에 도달할 수 있도록 돕는 장비
- 종단간 암호화(End-to-End Encryption)
  - 개요
    - 헤더와 트레일러가 암호화되지 않기 때문에, source와 destination의 장비들은 라우팅 정보만 읽고 패킷을 진행방향으로 통과시킴
    - Application layer에서 이루어짐

|구분|링크 암호화|종단간 암호화|
|----|-------|----------|
|특징|- ISP나 통신업자가 암호화, - 헤더를 포함한 모든 데이터 암호화, - 유저가 알고리즘 통제 불가|- 사용자가 암호화 - 헤더는 암호화하지 않음 - 알고리즘에 대한 통제는 사용자가|
|장점|- User-transparent하게 암호화되므로 운영이 간단 - 트래픽 분석을 어렵게 함 - 온라인으로 암호화|- 사용자 인증 등 높은 수준의 보안 서비스 제공 가능 - 중간노드에서도 데이터가 암호문으로 존재|
|단점|- 중간 노드에서 데이터가 평문으로 노출 - 다양한 보안서비스를 제공하는데 한계 - 모든 노드가 암호화 장비를 갖추어야하므로 네트워크가 커지면 비용 과다|- 트래픽분석이 취약 - 오프라인으로 암호화|

### 하드웨어와 소프트웨어 암호 시스템

- 하드웨어 암호 시스템
  - 개요
    - 컴퓨터와 통신기기의 내부버스와 외부 인터페이스에 전용 암호처리용 하드웨어를 설치하여 데이터 암호화
    - 전용 하드웨어로 암호화함
      - 컴퓨터 CPU 부담 없음, 빠른 속도로 암호화 가능, 보안성 확보
- 소프트웨어 암호 시스템
  - 개요
    - 암호처리용 소프트웨어를 사용한 데이터 암호화로 가능
    - 저렴한 비용으로 실현 가능
    - 허용범위 내에서 적당한 안정성과 처리속도를 얻는 것이 가능하면 상당히 효과적
      - PC CPU 성능 증가로, 처리속도가 문제가 되지 않으므로 주류가 되고 있음

## 2.3 주요 암호기술에 대한 개괄

### 대칭키 암호(symmetric cryptography)화 비대칭키 암호(asymmetric cryptography)

- 대칭키 암호
  - 정의
    - 암호화할 때, 사용하는 키와 복호화할 때 사용하는 키가 동일한 암호 알고리즘 방식
- 비대칭키 암호
  - 정의
    - 암호화할 때 사용하는 키와 복호화할 때 사용하는 키가 서로 다른 암호 알고리즘 방식

### 하이브리드 암호 시스템

- 대칭키 암호와 공개키 암호를 조합한 암호 방식

### 일방향 해시함수

- 해시값은 일방향 해시함수를 사용하여 계산한 값
- 일방향 해시함수를 통해 확인할 수 있는 것은 문서의 기밀성이 아닌, 무결성(완전성)

### 메시지 인증코드(Message Authentication Code)

- 메시지가 생각했던 통신 상대로부터 온 것임을 확인하기 위해서 메시지 인증코드 기술 사용
- MAC으로 확인할 수 있는 것들
  - **Message의 Integrity**
  - **송신자의 Authenticity**

### 전자서명

- 온라인에서의 서명의 개념
- **Integrity, Authenticity, Accountability를 하기 위한 암호 기술**

### 의사난수 생성기

- PRNG(Psudo Random Number Generator)는 난수열을 생성하는 알고리즘
- **키 생성이라는 매우 중요한 역할 담당**

## 2.4 암호 분석(암호 해독 - cryptoanalysis)

### 개요

- 정의
  - 암호 방식의 정규 참여자가 아닌, 제3자가 암호문으로부터 평문을 찾으려는 시도
  - 암호 해독에 참여하는 사람은 해독자, 제3자 또는 침해자라고 함
- Kerckhoff's principle
  - 암호시스템의 안전성은 키의 비밀을 지키는 데에 의존되어야 함
    - 암호 알고리즘의 비밀을 지키는데 의존하면 안됨
      - 왜지?
  - 암호 해독자는 현재 사용되고 있는 암호 방식을 알고 있다는 전제하에 암호 해독을 시도하는 것으로 간주
- 복호화 vs 해독
  - 복호화
    - 정상적으로 복호화키를 알고 있는 수신자가 암호문을 평문으로 복원하는 과정
  - 해독
    - 복호화키를 모르는 적 또는 암호분석가가 복호화키를 찾아내거나 평문내용을 알아내는 비정상적인 과정

### 암호 분석의 분류

- COA(Ciphertext Only Attack) - 암호문 단독 공격
  - 정의
    - Eve가 단지 어떤 암호문을 얻어서 대응되는 평문과 키를 찾는 것
      - Eve는 알고리즘을 알고있다고 이미 가정
  - 특징
    - 단지 암호문 C만을 갖고, 평문 P의 통계적 성질, 문장의 특성 등을 추정하여 해독
- KPA(Known Plaintext Attack) - 기지 평문 공격
  - 정의
    - Eve는 해독하려는 암호문 외에 추가로 여러 개의 평문/암호문 쌍을 얻어서 공격자에게 미리 주어짐
  - 특징
    - 일정량의 평문 P에 대응하는 암호문 C를 알고 있는 상태에서 해독하는 방법으로, C와 P의 관계로부터 키 K나 평문 P를 추정하여 해독
- CPA(Chosen Plaintext Attack) - 선택 평문 공격
  - 정의
    - 평문을 선택하면 대응하는 암호문을 얻을 수 있는 상황에서의 공격(KPA와는 다르게 임의의 평문을 선택 가능)
      - KPA와 유사하나, 공격자에게 주어지는 평문/암호문 쌍을 공격자가 선택하는 공격
  - 특징
    - Eve가 Alice의 컴퓨터에 접속할 수 있는 경우
- CCA(Chosen Ciphertext Attack) - 선택 암호문 공격
  - 정의
    - 암호문 C를 선택하면 그 암호문 C에 대한 평문 P를 얻어내 암호를 해독하는 방법
      - Eve가 암호문을 선택하고 그에 대응되는 평문을 얻는다는 점을 제외하면, 선택 평문 공격과 유사
  - 특징
    - Eve가 Bob의 컴퓨터에 접속할 수 있는 경우

## 2.5 암호 알고리즘의 안전성 평가

### 안전성 개념

- 계산적으로 안전함
  - 암호시스템을 공격하기 위해 필요한 계산량이 매우 커 현실적으로 공격할 수 없는 경우
- 무조건적으로 안전함
  - 무한한 계산능력이 있어도 공격할 수 없는 경우
    - 암호 해독 비용 > 암호화된 정보의 가치
    - 암호 해독 시간 > 정보의 유효 기간

## 2.6 지적 재산권 보호

### 디지털 저작권 관리

- Steganography(스테가노그래피)
  - 정의
    - 감추어진 기록으로, 메시지의 존재 자체를 은폐
  - 예시
    - 사진 파일에 인간이 인지하지 못할 정도의 미세한 부분에 변화를 주어 정보를 입력하는 방식
- Digital Watermarking(디지털 워터마킹)
  - 정의
    - 원본의 내용을 왜곡하지 않는 범위 내에서 혹은 사용자가 인식하지 못하도록 저작권 정보를 디지털 콘텐츠에 삽입하는 기술
    - 이미지, 오디오 또는 비디오의 일부 비트 대신 저작권 정보 등 다른 정보를 추가하더라도 사용자는 원래 미디어의 품질 손상을 인지하지 못하는 성질
  - 디지털 워터마킹 분류
    - 강한 워터마킹
      - 공격을 받아도 쉽게 파괴되거나 손상을 입지 않음
    - 연성(약한) 워터마킹
      - 공격을 받으면 쉽게 파괴되거나 손상을 입음
  - *youtube에서 소니 음악이 틀면 바로 제재 들어가는 이유가 이 때문??*
- Fingerprinting
  - 정의
    - 디지털 콘텐츠를 구매할 때, 구매자의 정보를 삽입하여 불법 배포 발견 시 최초의 배포자를 추적할 수 있게 하는 기술

|항목|Steganography|Watermark|Fingerprint|
|---|-------------|---------|-----------|
|은닉정보|메시지|판매자 정보|구매자 추적정보|
|관심|은닉메시지 검출|저작권 표시|구매자 추적|
|트래킹|불가|가능|가능|
|불법예방 효과|하|중|상|
|저작권증명 효과|하|중|상|
|공격 강인성|상대적 약함|상대적 강함|상대적 강함|

- DRM(Digital Rights Management - 디지털 저작권 관리)
  - 개요
    - 디지털 콘텐츠 소유자가 자신의 콘텐츠에 대한 접근을 자신 또는 자신의 위임자가 지정하는 다양한 방식으로 제어할 수 있게 하는 기술적인 방법 또는 방법들의 집합
      - Access Control 기술의 일종
    - 제어하는 콘텐츠 접근(CRUD)
      - executing
      - viewing
      - copying
      - printing
      - altering
    - 콘텐츠
      - 오디오, 비디오, 이미지, 텍스트, 멀티미디어, 컴퓨터 소프트웨어 등
  - DRM 구성 요소
    - Metadata
      - 콘텐츠 생명주기 범위 내에서 관리되어야 할 각종 데이터의 구조 및 정보
    - Package
      - 보호 대상인 콘텐츠를 메타데이터와 함께 Secure Container 포맷으로 패키징 하는 모듈
    - Secure Container
      - DRM의 보호 범위 내에서 유통되는 콘텐츠의 배포 단위
    - Identifier
      - 콘텐츠를 식별하기 위한 ID
    - DRM Controller
      - 콘텐츠를 이용하는 사용자의 PC 또는 디바이스 플랫폼에서 콘텐츠가 라이선스에 명시된 범위 내에서 지속적으로 보호될 수 있도록 프로세스를 제어
  - DRM 모델
    - DRM의 사용자를 그룹으로 분리
      - Content Provider
        - 콘텐츠에 대한 디지털 권리를 가지고 권리 보호를 원하는 DRM 사용자
      - Distributer
        - 온라인 쇼핑몰과 같은 콘ㅌ넨츠 유통 채널을 제공하는 DRM 사용자
      - Content Consumer
        - 클리어링하우스를 통해 콘텐츠에 대한 권리를 요청하고 합당한 대금 지불
      - ClearingHouse
        - 디지털 허가를 소비자에게 발급해주고 콘텐츠 제공자에게 로열티 수수료를 지불하며, 배급자에게 해당되는 배급 수수료를 지불하는 재정적 거래를 취급
        - 모든 소비자에게 허가된 사용을 기록하는 책임
