# 코덱(COder and DECoder - CODEC)

- 의문
- 개요
- 상세
- 설정 옵션
- 컨테이너와 확장자

## 의문

- 애초에 샘플링이란 무엇이고, 어떤 원리로 이루어지는것인지
- 비트레이트에 시간당 처리하는 용랑이라는 말이 무슨 뜻인지

## 개요

- 코더
  - 음성 또는 영상의 신호 -> 디지털 신호
    - 인코딩
- 디코더
  - 디지털 신호 -> 음성 또는 영상의 신호
    - 디코딩
- 코덱
  - 코더와 디코더의 기능을 지원해주는 소프트웨어

## 상세

- 멀티미디어(소리, 사진, 동영상)들은 아날로그 신호들이다.
  - *가 무슨뜻인지*
- 디지털로 부호화 하기 위해서는 샘플링을 실시하는데, 조밀하게 하면 원래 신호와 거의 똑같게 구현할 수 있지만, 용량은 기하급수적으로 늘어남
  - 아날로그 신호는 `Sin`함수 등등으로 계산하여 구현할 수 있고(*sin함수는 어떻게 디지털로 구현하는가?*) 사람이 인지하지 못하는 것은 가비지로 처리할 수 있는 특성 존재
  - 다양한 압축 알고리즘이 개발됨
    - 손실 압축 포맷
    - 무손실 압축 포맷
    - 무손실 무압축 포맷

## 설정 옵션

- 코덱을 사용하여 인코딩을 할 때 다음과 같은 것들을 고려
  - 코덱
    - 비디오 코덱, 오디오 코덱 종류 선택
  - 샘플레이트(Sample rate)
    - 음원 샘플링 빈도. 높을수록 고주파음을 담을 수 있고, 낮을수록 먹먹해짐
    - 기준
      - 44100(Hz) 가청주파수의 2배
      - 48kHz 고음질 음원
      - 8kHz 사람 음성 위주 음원
  - **프레임레이트(FPS)**
    - 1초에 보여지는 영상 프레임. 낮으면 화면이 끊김
    - 기준
      - 움직임이 많은 영상 60fps
      - 영화 24fps
      - CCTV 10~15fps
  - **비트레이트(BPS, Bit Per Sec)**
    - 시간당 처리하는 용량 (1초의 영상을 구성하는 데이터의 크기). **비트레이트가 높을수록 화질이 좋아지지만(표현을 풍부하게 할 수 있는 데이터가 증가하므로)**, 파일 용량이 높아지며, CPU에 부하가 걸릴 수 있으며, 네트워크 속도(*QoS* 에 따라 버퍼링이 걸릴 수 있음)
      - 미디어
        - MP3 128~320kbps
        - CD 1411kbps
        - DVD 10Mbps
        - 지상파 20Mbps
        - 블루레이 40Mbps
  - 키(key)프레임
    - 일정 시간당 저장되는 일종의 스틸컷 화면
    - 같은 비트레이트(용량)라면 키프레임이 많을수록 여기에 자원이 더 배분되어 화질은 떨어질 수 있음
  - 영상 사이즈
    - 영상의 해상도. 높을수록 선명한 화면을 보여주지만 적절한 비트레이트를 선택하지 않으면 화질이 떨어질 수 있음(UHD, HD, ...)
  - 인코딩 시간
    - 생방송
      - 화질을 포기하고 시간을 선택
    - DVD
      - 시간을 버리고 화질을 선택
    - 혹은 그 중간 적정선
    - 특징
      - 최신 코덱이 인코딩 시간이 길다
      - OpenCL, GPGPU등의 하드웨어 가속을 이용
      - 1pass, 2pass 이미지를 분석하여 효율적인 인코딩 가능
      - Direct Stream 인코딩을 하지 않고 그대로 저장하는 옵션
      - 녹화: 재생하는 시간만큼 미디어 저장 시간이 걸림

## 컨테이너와 확장자

- 코덱
  - 미디어파일 압축방식. 코덱에 따라 용량과 화질이 좌우되며 재생이 불가능할 수 있음
- 컨테이너
  - 코덱으로 압축된 미디어 + 코덱이름 제목 아티스트 날짜등의 메타데이터
- 확장자
  - 텍스트 꼬리표. 수정해도 파일 본질은 안바뀜
