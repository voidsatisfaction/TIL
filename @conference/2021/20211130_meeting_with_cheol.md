# A모 회사 이야기

## 철사부

## A모 회사 데브옵스팀이 하는 일

- 몇억명이 사용하는 서비스의 인프라 제공
  - 아키텍처
    - MSA
      - 그런데 메서드 단위로 MSA를 해서 인프라 관리하는게 너무 힘들다고 함
      - 마이크로서비스가 터져도 무슨 문제가 생겼는지 모름
    - AWS
  - 쿠버네티스
    - 컨테이너 오케스트레이션
  - 사이드카
    - 웹 애플리케이션은 비즈니스 로직만 담당할 수 있도록 도와주는 친구
      - 예시) 로그 같은 친구들을 웹 앱은 그냥 stdout으로 프린트만 하는데, 사이드카가 알아서 스탠다드 스트림을 캐치해서 로그 수집기로 보냄
  - 서비스 메시
    - 마이크로 서비스간의 네트워크 프록시(네트워크에 관한 처리를 담당)역할을 담당
    - 장점
      - 쿠버네티스 내부의 로드벨런서를 사용하지 않고, 서비스 메시를 이용해서 로드밸런싱이 가능
        - 로드벨런서를 통해서 네트워크 통신하는것보다 훨씬 빠름
      - 네트워크 통신 모니터링이 쉬움
  - DB
    - AuroraDB
      - MySQL의 친척
      - 다이나믹 인덱싱 지원(용어가 정확하지 않음)
        - lazy하게 인덱스를 부여(필요할때, 인덱스를 삽입하고 그것을 활용)
- 재미있는 이야기
  - 인프라팀은 잠을 못자
    - 새벽에 자동 알림으로 연락옴
      - 메모리 90%까지 찼습니다 알람
    - 당직이 존재해서 그사람이 팟 끄고 켜고 다함
    - 스트레스가 많다
      - 다만, 야근비를 줌
  - 데이터 베이스 관리
    - 거의 무조건 스케일업
      - 디비 서버의 가장 좋은 인스턴스가 메모리 512GB, 128Core(?!)
    - replica사용
    - 파티셔닝은 복잡해지므로 안함
  - 중동서버의 경우 1시간마다 SSL 인증서와 도메인 교체중
    - 검열 때문에 그래야 한다고 합니다
    - 파이썬 스크립트로 동작중
  - 인프라팀은 워커홀릭
    - 슬랙에서 밤에도 새벽에도 아티클 공유하면서 개발이야기한다고 함
  - 레거시와 싸우기
    - 사람들이 금방 나가는 경우가 있어서, 레거시가 많음
    - 아무도 다룰 수 없는 코드, 다룰 수 없는 툴
  - JVM 튜닝
