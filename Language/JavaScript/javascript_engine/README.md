# Javascript Engine

## 정의

- 자바스크립트 코드를 실행해주는 프로그램(혹은 인터프리터)
- 자바스크립트 코드를 parsing한 후, AOT를 생성하고, 바이트 코드를 생산하고, 그것의 일부를 최적화 해서 다시 기계어로 컴파일해서 CPU가 실행하도록 함

## 동작 순서

- js 코드 파싱
- AST(Abstract Syntax Tree) 생성
- AST를 바이트 코드로 인터프리트 함
  - 매우 빠른 속도로 바이트 코드를 맨 처음 페이지를 로딩했을때만 생성
  - AST, 바이트 코드 포맷은 엔진마다 서로 다름
  - 인터프리터에서 직접 실행하는 것도 가능
    - 하지만 런타임 퍼포먼스가 조금 좋지 못함
- 바이트 코드를 컴파일러로 기계어로 변경
  - 이때에 optimizer compiler가 특정 함수가 많이 호출되는 것을 발견하면 그것을 최적화 시킨 기계어를 생성
  - CPU에 직접 동작시키도록 함
  - JIT compilation
    - 프로그램 런타임에 컴파일을 함
    - 바이트 코드를 계속 실행하면서 어떠한 특정 함수 혹은 부분을 기계어로 컴파일 해놓는 것. 반복해서 재컴파일 하는것보다 더 효과적인 부분을 찾아서 그것을 컴파일 해주고 캐싱해서 캐싱한 기계어를 사용하도록 함
    - 컴파일 코드의 속도 + 인터프리터의 유연성
    - dynamic compilation / adaptive optimization
  - e.g) v8
    - ignition 이라는 프로그램
