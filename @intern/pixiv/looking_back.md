# Pixivインターンを振り返って見ると

本日(2017. 9. 8)で最終発表も終わった。インターンに参加したみんな、それぞれのチームですごい活躍をしたことが最終発表会でわかった。

そもそも、今回のインターンシップに参加した人たちはみんな経験豊富ですごい人ばかりであった。

メンターさんたちも技術に非常に詳しく、心も優しく、みんな素晴らしかった。

今回は、その五日間の記憶を辿って感じたことを書きたいと思う。

## 第一番：夢を叶えた！！！

プログラミングの初心者のころから私は、オープンソースコミッターになることが「夢」だった。そこには、大きな理由があるわけではない。ただ、漠然とした憧れと、自分がもらったオープンソースの恩恵をそのコミュニーティに返したかったのである。

しかし、オープンソースに貢献する道は私には遠かった。そもそも、オープンソースはすごいできる「天才のようなプログラマー」が問題がある場合、ひたすら頑張って書いて自分のコードを反映する感じだと思っていた。それで、私は自分自身が「オープンソースにコントリビューションすることができない実力」であると考え、コミットしたいと思いながらも、実際行動したことは一度もなかった。自分の中ではオープンソースへコミットすることが「怖い」と思っていた。そもそも、やるとしてもどこから手をつければいいのかもわからなかったからだ。

それが、今回のPixiv BootCampインターンに参加してドラマチックに変わった。私は、MastodonというTwitterのようなマイクロブログアプリケーションのコントリビューターになった。現在のところは、5コミットしていて、中身は「翻訳」といったものからClient / Server両方に渡る画面追加まで様々な活動を行った。もちろん、バグ修正も行った。

そしてわかったのが、オープンソースにコミットすることに大事なことは、「実力」でなく貢献したいという「熱情」であることがわかった。対象となるプログラムが好きすぎで、どうしてでも貢献したいと思うことから始まると思う。本当に最初は簡単な翻訳や小さなUIの修正も良いと思う。そこからますます自分のできる領域を広めたら良いのである。

本日語ることはできなかったが、私の今の気持ちは、一年前、人生初コミットした時の感激・アメリカの宇宙船が月の表面に着陸し、ニールアムスロングが月の表面へ一歩を出した時の嬉しさと一緒である。

締めの言葉は以下がふさわしいだろう。

**That's one small step for (a) man, one giant leap for mankind.**
**(これは一人の人間にとっては小さな一歩だが、人類にとっては偉大な飛躍である)**

**今回は、一人のプログラマとしては、小さなコミットに過ぎないが、プログラミングの歴史にとっては偉大な飛躍につながるだろう。**

## 第二番：未来を考慮した設計の大事さ

今回、インターンシップで関わったMastodonはオープンソースであり、すごく大きな規模のSNSサービスである。最初は、規模の大きなオープンソースはわりとしっかりしているのかなとおもっていたが、Mastodonは逆にコードの流れがわかりにくいし、データフローや全体像がわかりにくいこともあるのをわかるようになった。

さらに、Mastodonのもっとも大きな問題は、Frontend側で、Reactを取り入れていてReduxを使っているが、ReduxのStoreと様々なコンポーネントが無分別に繋がっていることである。つまり、コンポーネントの役割分担が非常にわかりづらくなっている。ある小さなコンポーネントもStoreと繋がっていたり、大きなコンポーネントが全くなにとも繋がっていなかったり、一貫性が足りない設計である。もちろん、そこには深い理由があるかもしれないが、少なくとも、今回のメンターであったabcangも同意した意見である。

今、もし、自分がMastodonのテクニカルリーダーであるとしたら、きちんと、コンポーネントを分離し、Containerはもっとも大きな単位で管理していきたいと思う。Mastodonの場合、実際のメインページはTimeline一つしかないので、ColumnをContainerとして、使うことが適切ではないだろうか。それ以外のコンポーネントは全部`Props`を貰う形とし、非常に細かく責務分担を行うと、データフローが一定になり、人間がわかりやすいコードになるだろう。しかし、この方法は、Storeが肥大化すると、Containerコンポーネントからもっとも下のコンポーネントまでの`state渡し`がややこしく、難しくなるだろう。だからこそ、非常に細かく・論理的に矛盾のないコンポーネントの「責務分担」が必要であろう。

このように、Mastodonにコントリビュートしたおかげで、**設計の大切さ**　も肌で実感できた。もちろん、今のコードでも十分開発はできると思うが、「本当にこれで良いのか」に対しては考えるべき余地があるだろう。
